<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Révision NL – Générateur 3 phases</title>

<style>
body { font-family: Arial, sans-serif; margin: 20px; }
h2 { margin-top: 30px; }
textarea, input { width: 100%; padding: 8px; margin-top: 5px; }
button { padding: 12px 20px; margin-top: 20px; cursor: pointer; }
.hidden { display: none; }
.box { background: #f7f7f7; padding: 15px; border-left: 4px solid #888; margin-bottom: 20px; }
.word { background: #eef; padding: 3px 6px; margin: 2px; display: inline-block; }
</style>
</head>

<body>

<h1>Générateur de révision néerlandais – 3 phases</h1>

<!-- ============================
     PHASE 0 : FORMULAIRE
=============================== -->
<div id="phase0">

    <div class="box">
        <h2>1. Région</h2>
        <input type="text" id="region" placeholder="Ex : Nijmegen, Zuid-Holland…">
    </div>

    <div class="box">
        <h2>2. Titre de l’article</h2>
        <input type="text" id="titre" placeholder="Titre de l’article">
    </div>

    <div class="box">
        <h2>3. Corps de l’article</h2>
        <textarea id="article" placeholder="Colle ici l’extrait de l’article"></textarea>

        <h3>Image (URL facultative)</h3>
        <input type="text" id="imageURL" placeholder="https://...">
    </div>

    <div class="box">
        <h2>4. Vocabulaire / Grammaire</h2>
        <textarea id="vocab" placeholder="Liste de vocabulaire, règles, remarques…"></textarea>
    </div>

    <div class="box">
        <h2>5. Conjugaison</h2>
        <textarea id="conjug" placeholder="Verbes + temps + remarques…"></textarea>
    </div>

    <button onclick="genererRevision()">Générer ma révision</button>
</div>

<!-- ============================
     PHASE 1 : VOCABULAIRE
=============================== -->
<div id="phase1" class="hidden">
    <h2>Phase 1 : Vocabulaire / Grammaire / Conjugaison</h2>

    <div class="box">
        <h3>Vocabulaire & Grammaire</h3>
        <div id="affVocab"></div>
    </div>

    <div class="box">
        <h3>Conjugaison</h3>
        <div id="affConjug"></div>
    </div>

    <button onclick="goToQuiz()">Passer au test</button>
</div>

<!-- ============================
     PHASE 2 : QUIZ
=============================== -->
<div id="phase2" class="hidden">
    <h2>Phase 2 : Test (10 questions)</h2>

    <div id="quizZone"></div>

    <button onclick="goToLecture()">Passer à la lecture</button>
</div>

<!-- ============================
     PHASE 3 : LECTURE
=============================== -->
<div id="phase3" class="hidden">
    <h2>Phase 3 : Lecture de l’article</h2>

    <h3 id="affTitre"></h3>
    <p><em id="affRegion"></em></p>

    <img id="affImage" style="max-width:300px; display:none; margin:10px 0;">

    <p id="affArticle"></p>
</div>

<script>
let vocabulaire = [];
let questions = [];
let indexQuestion = 0;

// ============================
//  GÉNÉRATION DE LA RÉVISION
// ============================
function genererRevision() {
    const region = document.getElementById("region").value.trim();
    const titre = document.getElementById("titre").value.trim();
    const article = document.getElementById("article").value.trim();
    const imageURL = document.getElementById("imageURL").value.trim();
    const vocab = document.getElementById("vocab").value.trim();
    const conjug = document.getElementById("conjug").value.trim();

    if (!article || !titre) {
        alert("Merci de remplir au minimum le titre et l’article.");
        return;
    }

    // Stockage pour les phases suivantes
    document.getElementById("affVocab").innerText = vocab;
    document.getElementById("affConjug").innerText = conjug;

    document.getElementById("affTitre").innerText = titre;
    document.getElementById("affRegion").innerText = region;
    document.getElementById("affArticle").innerText = article;

    if (imageURL) {
        const img = document.getElementById("affImage");
        img.src = imageURL;
        img.style.display = "block";
    }

    // Préparation du quiz
    vocabulaire = vocab.split("\n").filter(l => l.trim().length > 0);
    questions = melanger(vocabulaire).slice(0, 10);

    // Passage à la phase 1
    document.getElementById("phase0").classList.add("hidden");
    document.getElementById("phase1").classList.remove("hidden");
}

// ============================
//  PHASE 2 : QUIZ
// ============================
function goToQuiz() {
    document.getElementById("phase1").classList.add("hidden");
    document.getElementById("phase2").classList.remove("hidden");
    indexQuestion = 0;
    afficherQuestion();
}

function afficherQuestion() {
    const zone = document.getElementById("quizZone");

    if (indexQuestion >= questions.length) {
        zone.innerHTML = "<p>Test terminé !</p>";
        return;
    }

    const q = questions[indexQuestion];

    zone.innerHTML = `
        <p><strong>Question ${indexQuestion + 1} :</strong></p>
        <p>${q}</p>
        <input id="rep" placeholder="Ta réponse">
        <button onclick="suivante()">Valider</button>
    `;
}

function suivante() {
    indexQuestion++;
    afficherQuestion();
}

// ============================
//  PHASE 3 : LECTURE
// ============================
function goToLecture() {
    document.getElementById("phase2").classList.add("hidden");
    document.getElementById("phase3").classList.remove("hidden");
}

// ============================
//  OUTIL : Mélanger un tableau
// ============================
function melanger(arr) {
    return arr.sort(() => Math.random() - 0.5);
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>15 Miljoen Mensen - Vid√©o Culturelle</title>
<link rel="stylesheet" href="../styles.css?v=1.0.0">
<script src="../version.js"></script>
<style>
  .video-container {
    position: relative;
    width: 100%;
    max-width: 800px;
    margin: 20px auto;
    background: #f0f0f0;
    border-radius: 10px;
    overflow: hidden;
  }

  .video-wrapper {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
    overflow: hidden;
  }

  .video-wrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
  }

  .video-fullscreen-btn {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.9em;
    z-index: 10;
  }

  .video-fullscreen-btn:hover {
    background: rgba(0, 0, 0, 0.9);
  }

  .modal-video {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
  }

  .modal-video.active {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .modal-content-video {
    position: relative;
    width: 95%;
    max-width: 1200px;
    aspect-ratio: 16 / 9;
  }

  .modal-content-video iframe {
    width: 100%;
    height: 100%;
    border: none;
  }

  .close-modal {
    position: absolute;
    top: -40px;
    right: 0;
    color: white;
    font-size: 2em;
    font-weight: bold;
    cursor: pointer;
  }

  .close-modal:hover {
    color: #ccc;
  }

  .back-btn {
    display: inline-block;
    margin-bottom: 20px;
    padding: 10px 20px;
    background: #667eea;
    color: white;
    text-decoration: none;
    border-radius: 5px;
    font-weight: 600;
  }

  .back-btn:hover {
    background: #5568d3;
  }
</style>
</head>
<body>
<div class="fiche-container">
  <a href="../index.html" class="back-btn">‚Üê Retour</a>
  
  <div class="fiche-header">
    <h1 class="fiche-title">üé¨ 15 Miljoen Mensen</h1>
    <p class="fiche-meta">üá≥üá± Une vid√©o culturelle sur les Pays-Bas | üéµ Chanson</p>
  </div>

  <div id="phase1">
    <div class="video-container">
      <div class="video-wrapper">
        <iframe src="https://www.youtube.com/embed/wftARWunM2I?cc_load_policy=1" allowfullscreen="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" loading="lazy"></iframe>
        <button class="video-fullscreen-btn" onclick="openFullscreenVideo()">üñ•Ô∏è Plein √©cran</button>
      </div>
    </div>

    <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #3B82F6;">
      <p style="margin: 0;"><strong>üí° Conseil :</strong> Les sous-titres sont activ√©s par d√©faut. Si vous ne les voyez pas, cliquez sur l'ic√¥ne CC (sous-titres) en bas √† droite de la vid√©o, ou appuyez sur C pour les afficher.</p>
    </div>

    <h2>üìö Vocabulaire - Expressions culturelles cl√©s</h2>
    <p style="font-style: italic; color: #666;">Cliquez sur üîä pour √©couter la prononciation</p>
    <table class="fiche-table">
      <thead>
        <tr>
          <th>N√©erlandais</th>
          <th>Fran√ßais</th>
        </tr>
      </thead>
      <tbody id="vocabularyTable">
        <!-- Rempli par JavaScript -->
      </tbody>
    </table>

    <h2>üìù Transcription</h2>
    <div style="background: #f5f5f5; padding: 20px; border-radius: 8px; line-height: 1.8; font-size: 0.95em;">
      <p><strong>Land van 1000 meningen.</strong> Het land van nuchterheid met zijn allen op het strand beschuit bij het ontbijt. Het land waar niemand zich laat gaan. Behalve als we winnen, dan breekt acu de passie los. Dan blijft geen mens meer binnen. Het land wars van betutteling. Geen uniform is heilig. Een zoon die noemt zijn vader Piet. Een fiets staat nergens veilig.</p>

      <p><strong>15 miljoen mensen</strong> op dat hele kleine stukje aarde. Je schrijf je in de wetten voor. Je laat je in een waarde. 15 miljoen mensen op het hele kleine stukje aarde. Die moeten niet het keurslijf in. Uwatje in hun waarde.</p>

      <p>Het land vol groepen van protest. Geen chef die echt de baas is. Gordijnen altijd open zijn. Lunch, een broodje kaas is het land vol van verdraagzaamheid. Alleen niet voor de buurman. Een grote vraag die blijft altijd. Waar betaalt hij nou zijn huur van? Het land dat zorgt voor iedereen. Geen hond die van een groot weet. Met nassie ballen in de muur en niemand die droog brood eet.</p>

      <p><strong>15 miljoen mensen</strong> om dat hele kleine stukje aarde. Je schrijft je niet de wetten voor. Die laat je in een waarde. 15 miljoen mensen op dat hele kleine stukje aarde die moeten niet het keurslijf in die laat je in hun waarden.</p>

      <p><strong>15 miljoen mensen</strong> op dat hele kleine stukje aarde. Je schrijf je niet de wetten voor. Je laat je in een waarde. 15 miljoen mensen op het hele kleine stukje aarde die moeten niet het keurslijf in. U laat je in hun waarde.</p>
    </div>

    <button class="btn btn-primary" onclick="goToQuiz()">‚û°Ô∏è Passer au quiz</button>
  </div>

  <div id="phase2" class="hidden">
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <p id="progressText"></p>
    <div id="quizZone"></div>
  </div>
</div>

<!-- Modal pour vid√©o plein √©cran -->
<div id="videoModal" class="modal-video">
  <div class="modal-content-video">
    <span class="close-modal" onclick="closeFullscreenVideo()">&times;</span>
    <iframe src="https://www.youtube.com/embed/wftARWunM2I?cc_load_policy=1" allowfullscreen="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" loading="lazy"></iframe>
  </div>
</div>

<script>
let data = null;
let questions = [];
let indexQ = 0;

// Charger les donn√©es
async function loadData() {
  try {
    const response = await fetch('./15miljoenmensen.json');
    data = await response.json();
    displayVocabulary();
    generateQuestions();
  } catch (error) {
    console.error('Erreur au chargement des donn√©es:', error);
  }
}

// Afficher le vocabulaire
function displayVocabulary() {
  if (!data || !data.traductions) return;
  
  const tbody = document.getElementById('vocabularyTable');
  tbody.innerHTML = '';

  data.traductions.forEach(item => {
    const row = `<tr>
      <td>
        <button class="btn btn-primary" onclick="pronounce('${item.neerlandais}')" style="background: none; border: none; cursor: pointer; font-size: 1.2em; padding: 0; color: #4ecdc4;">üîä</button>
        ${item.neerlandais}
      </td>
      <td>${item.francais}</td>
    </tr>`;
    tbody.innerHTML += row;
  });
}

// G√©n√©rer les questions du quiz
function generateQuestions() {
  if (!data || !data.traductions) return;
  
  questions = data.traductions.map(item => ({
    question: `Quel est le sens de "${item.neerlandais}" ?`,
    reponse: item.francais,
    mot_neerlandais: item.neerlandais
  }));
}

// Prononciation
function pronounce(word) {
  if (!window.speechSynthesis) {
    console.error('Web Speech API non disponible');
    return;
  }
  
  window.speechSynthesis.cancel();
  const utterance = new SpeechSynthesisUtterance(word);
  utterance.lang = 'nl-NL';
  utterance.rate = 0.8;
  window.speechSynthesis.speak(utterance);
}

// Encouragement al√©atoire
function getRandomEncouragement() {
  const encouragements = [
    'üéâ Excellent !',
    'üëç Bien jou√© !',
    '‚≠ê Tr√®s bon !',
    'üéØ C\'est √ßa !',
    'üí™ Bravo !',
    '‚ú® Super !',
    'üåü Fantastique !',
    'üî• Impressionnant !'
  ];
  return encouragements[Math.floor(Math.random() * encouragements.length)];
}

// Mise √† jour de la progression
function updateProgress() {
  const percent = (indexQ / questions.length) * 100;
  document.getElementById("progressFill").style.width = percent + "%";
  document.getElementById("progressText").textContent = "Question " + indexQ + " / " + questions.length;
}

// Aller au quiz
function goToQuiz() {
  document.getElementById("phase1").classList.add("hidden");
  document.getElementById("phase2").classList.remove("hidden");
  afficherQuestion();
}

// Afficher la question
function afficherQuestion() {
  const zone = document.getElementById("quizZone");
  updateProgress();
  if (indexQ >= questions.length) {
    zone.innerHTML = '<div class="completion-message"><p>‚úÖ Quiz termin√© ! Bravo !</p><p style="font-size: 1.1em; color: #c41e3a;">Goed gedaan! üéä</p><button class="btn btn-primary" onclick="location.reload()">üîÑ Recommencer</button></div>';
    return;
  }
  zone.innerHTML = `
    <p><strong>Question ${indexQ + 1} / ${questions.length}</strong></p>
    <p style="font-size: 1.1em; margin: 15px 0;">${questions[indexQ].question}</p>
    <button class="btn btn-primary" onclick="suivante()">‚û°Ô∏è Voir la r√©ponse</button>
  `;
}

// Question suivante
function suivante() {
  const zone = document.getElementById("quizZone");
  const reponseCorrecte = questions[indexQ].reponse;
  zone.innerHTML += "<div class=\"answer-display\">‚úÖ R√©ponse : <strong>" + reponseCorrecte + "</strong></div>";
  zone.innerHTML += "<div class=\"encouragement\">"+ getRandomEncouragement() + "</div>";
  indexQ++;
  setTimeout(() => afficherQuestion(), 2000);
}

// Plein √©cran vid√©o
function openFullscreenVideo() {
  document.getElementById('videoModal').classList.add('active');
}

function closeFullscreenVideo() {
  document.getElementById('videoModal').classList.remove('active');
}

// Fermer la modal en cliquant en dehors
document.addEventListener('DOMContentLoaded', function() {
  loadData();
  document.getElementById('videoModal').addEventListener('click', function(e) {
    if (e.target === this) {
      closeFullscreenVideo();
    }
  }, { passive: true });
});
</script>
</body>
</html>
